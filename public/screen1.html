const protocol = location.protocol === 'https:' ? 'wss' : 'ws';
const ws = new WebSocket(`${protocol}://${location.host}/?type=screen1`);

ws.onopen = () => {
  console.log("WebSocket ansluten till servern (screen1)!");
};

ws.onerror = (err) => {
  console.error("WebSocket fel:", err);
};

ws.onmessage = (event) => {
  try {
    const data = JSON.parse(event.data); // { orderNumber, amount, message }

    const li = document.createElement("li");
    li.innerHTML = `
      <span class="order-number">Order #${data.orderNumber}</span> — 
      <span class="amount">${data.amount} kr</span> — 
      <span class="message">"${data.message}"</span>
    `;
    
    const orderList = document.getElementById("orderList");
    orderList.insertBefore(li, orderList.firstChild);
  } catch (e) {
    console.error("Felaktigt meddelande från servern:", e);
  }
};
